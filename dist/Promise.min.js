(function(){var a="undefined"!==typeof module&&module.exports?"node":"browser",e=function(l){var c=0,d=null,f,g=this,a=function(b){if(0===c)return d=b,!1;var a=2===c?b.onResolved:b.onRejected;return a?b.resolve(a(f)):2===c?b.resolve(f):b.reject(f)},h=function(b){c=1;f=b;d&&a(d)},k=function(b){b&&"function"===typeof b.then?b.then(k,h):(c=2,f=b,d&&a(d))};g.then=function(b,c){return new e(function(d,e){return a({onResolved:b,onRejected:c,resolve:d,reject:e})})};g["catch"]=function(b){return g.then(null,
b)};g["finally"]=function(b){return g.then(b)};return l(k,h)};e.resolve=function(a){return new e(function(c){return c(a)})};e.reject=function(a){return new e(function(c,d){return d(a)})};e.all=function(a){var c=[],d=e.resolve(null);a.forEach(function(a){d=d.then(function(){return a}).then(function(a){c.push(a)})});return d.then(function(){return c})};"node"===a?module.exports=e:(a=window||{},a.define&&a.define.amd&&a.define(function(){return e}),a.Promise=e)})();