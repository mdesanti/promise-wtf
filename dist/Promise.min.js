(function(){var m="undefined"!==typeof module&&module.exports?"node":"browser",k=function(a){return a&&"[object Function]"==={}.toString.call(a)},f=function(a){var b=0,c=null,g,l=this,d=function(h){if(0===b)return c=h,!1;var a=2===b?h.onResolved:h.onRejected;return a?h.resolve(a(g)):2===b?h.resolve(g):h.reject(g)},e=function(a){b=1;g=a;c&&d(c)},n=function(a){a&&k(a.then)?a.then(n,e):(b=2,g=a,c&&d(c))};l.then=function(a,b){return new f(function(c,g){return d({onResolved:a,onRejected:b,resolve:c,reject:g})})};
l["catch"]=function(a){if(a&&k(a))return l.then(null,a)};return a(n,e)};f.resolve=function(a){return new f(function(b){return b(a)})};f.reject=function(a){return new f(function(b,c){return c(a)})};f.all=function(a){var b=[],c=f.resolve(null);a.forEach(function(a){c=c.then(function(){return a}).then(function(a){b.push(a)})});return c.then(function(){return b})};var d,e="node"===m?global:window;d=e.Promise?e.Promise:f;d.prototype["finally"]=function(a){if(a&&k(a))return a()};d.series=function(a){return new d(function(b,
c){var d,e,f=0,k=a.length;d=function(a){return a?c(a):e()};e=function(){f++;return f<=k?(0,a[f-1])(d):b()};return e()})};"node"===m?module.exports=d:(e.define&&e.define.amd&&e.define(function(){return d}),e.Promise=d)})();